<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Données NGX en temps réel</title>
</head>
<body>
    <h1>Tableau des actions NGX</h1>
    <div id="content">Chargement...</div>

    <script>
        async function fetchData() {
            try {
                const res = await fetch("http://127.0.0.1:8000/api/ngx");
                const data = await res.json();

                let html = "<table border='1'><tr><th>Symbole</th><th>Prix d'ouverture</th><th>Volume</th></tr>";

                data.forEach(row => {
                    html += `<tr>
                        <td>${row.Symbol}</td>
                        <td>${row.OpeningPrice}</td>
                        <td>${row.Volume}</td>
                    </tr>`;
                });

                html += "</table>";
                document.getElementById("content").innerHTML = html;

            } catch (error) {
                console.error("Erreur:", error);
                document.getElementById("content").innerText = "Erreur de chargement";
            }
        }

        // Rafraîchir toutes les 10 secondes
        setInterval(fetchData, 10000);
        fetchData();
    </script>
</body>
</html>
